<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="interactions">
<title>Plotting interactions among categorical variables in regression models • interactions</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Lato-0.4.1/font.css" rel="stylesheet">
<link href="../deps/_IBM%20Plex%20Mono-0.4.1/font.css" rel="stylesheet">
<link href="../deps/_Raleway-0.4.1/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Plotting interactions among categorical variables in regression models">
<meta property="og:description" content="interactions">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">interactions</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Documentation
  </a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--vignettes">
    <span class="fa fa-book"></span>
     
    Vignettes
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--vignettes">
    <a class="dropdown-item" href="../articles/interactions.html">Exploring interactions with continuous predictors in regression models</a>
    <a class="dropdown-item" href="../articles/categorical.html">Plotting interactions among categorical variables in regression models</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jacob-long/interactions">
    <span class="fa fa-github fa-lg"></span>
     
    Github
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plotting interactions among categorical variables in regression models</h1>
                        <h4 data-toc-skip class="author">Jacob Long</h4>
            
            <h4 data-toc-skip class="date">2022-04-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jacob-long/interactions/blob/HEAD/vignettes/categorical.Rmd" class="external-link"><code>vignettes/categorical.Rmd</code></a></small>
      <div class="d-none name"><code>categorical.Rmd</code></div>
    </div>

    
    
<pre><code><span class="co">## </span>
<span class="co">## Attaching package: 'interactions'</span></code></pre>
<pre><code><span class="co">## The following objects are masked from 'package:jtools':</span>
<span class="co">## </span>
<span class="co">##     cat_plot, interact_plot, johnson_neyman, probe_interaction,</span>
<span class="co">##     sim_slopes</span></code></pre>
<p>When trying to understand interactions between categorical predictors, the types of visualizations called for tend to differ from those for continuous predictors. For that (and some other) reasons, <code>interactions</code> offers support for these in <code>cat_plot</code> while continuous predictors (perhaps in interactions with categorical predictors) are dealt with in <code>interact_plot</code>, which has a separate vignette.</p>
<p>To be clear…</p>
<p>If all the predictors involved in the interaction are categorical, use <code>cat_plot</code>. You can also use <code>cat_plot</code> to explore the effect of a single categorical predictor.</p>
<p>If one or more are continuous, use <code>interact_plot</code>.</p>
<div class="section level2">
<h2 id="simple-two-way-interaction">Simple two-way interaction<a class="anchor" aria-label="anchor" href="#simple-two-way-interaction"></a>
</h2>
<p>First, let’s prep some data. I’m going to make some slight changes to the <code>mpg</code> dataset from <code>ggplot2</code> for didactic purposes to drop a few factor levels that have almost no values (e.g., there are 5 cylinder engines?).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="va">mpg2</span> <span class="op">&lt;-</span> <span class="va">mpg</span>
<span class="va">mpg2</span><span class="op">$</span><span class="va">cyl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">mpg2</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span>
<span class="va">mpg2</span><span class="op">[</span><span class="st">"auto"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"auto"</span>
<span class="va">mpg2</span><span class="op">$</span><span class="va">auto</span><span class="op">[</span><span class="va">mpg2</span><span class="op">$</span><span class="va">trans</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"manual(m5)"</span>, <span class="st">"manual(m6)"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"manual"</span>
<span class="va">mpg2</span><span class="op">$</span><span class="va">auto</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">mpg2</span><span class="op">$</span><span class="va">auto</span><span class="op">)</span>
<span class="va">mpg2</span><span class="op">[</span><span class="st">"fwd"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"2wd"</span>
<span class="va">mpg2</span><span class="op">$</span><span class="va">fwd</span><span class="op">[</span><span class="va">mpg2</span><span class="op">$</span><span class="va">drv</span> <span class="op">==</span> <span class="st">"4"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"4wd"</span>
<span class="va">mpg2</span><span class="op">$</span><span class="va">fwd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">mpg2</span><span class="op">$</span><span class="va">fwd</span><span class="op">)</span>
<span class="co">## Drop the two cars with 5 cylinders (rest are 4, 6, or 8)</span>
<span class="va">mpg2</span> <span class="op">&lt;-</span> <span class="va">mpg2</span><span class="op">[</span><span class="va">mpg2</span><span class="op">$</span><span class="va">cyl</span> <span class="op">!=</span> <span class="st">"5"</span>,<span class="op">]</span>
<span class="co">## Fit the model</span>
<span class="va">fit3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">cty</span> <span class="op">~</span> <span class="va">cyl</span> <span class="op">*</span> <span class="va">fwd</span> <span class="op">*</span> <span class="va">auto</span>, data <span class="op">=</span> <span class="va">mpg2</span><span class="op">)</span></code></pre></div>
<p>So basically what we’re looking at here is an interaction between number of cylinders in the engine of some cars and whether the car has all-wheel drive or two-wheel drive. The DV is fuel mileage in the city.</p>
<p>Here’s summary output for our model:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jtools.jacob-long.com" class="external-link">jtools</a></span><span class="op">)</span> <span class="co"># for summ()</span>
<span class="fu"><a href="https://jtools.jacob-long.com/reference/summ.html" class="external-link">summ</a></span><span class="op">(</span><span class="va">fit3</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="text-decoration: underline;">MODEL INFO:</span></span>
<span class="co">## <span style="font-style: italic;">Observations:</span> 230</span>
<span class="co">## <span style="font-style: italic;">Dependent Variable:</span> cty</span>
<span class="co">## <span style="font-style: italic;">Type:</span> OLS linear regression </span>
<span class="co">## </span>
<span class="co">## <span style="text-decoration: underline;">MODEL FIT:</span></span>
<span class="co">## <span style="font-style: italic;">F</span>(11,218) = 61.37, <span style="font-style: italic;">p</span> = 0.00</span>
<span class="co">## <span style="font-style: italic;">R² = </span>0.76</span>
<span class="co">## <span style="font-style: italic;">Adj. R² = </span>0.74 </span>
<span class="co">## </span>
<span class="co">## <span style="font-style: italic;">Standard errors: OLS</span></span>
<span class="co">## -----------------------------------------------------------</span>
<span class="co">##                                 Est.   S.E.   t val.      p</span>
<span class="co">## ---------------------------- ------- ------ -------- ------</span>
<span class="co">## (Intercept)                    21.37   0.39    54.19   0.00</span>
<span class="co">## cyl6                           -4.37   0.54    -8.07   0.00</span>
<span class="co">## cyl8                           -8.37   0.67   -12.51   0.00</span>
<span class="co">## fwd4wd                         -2.91   0.76    -3.83   0.00</span>
<span class="co">## automanual                      1.45   0.57     2.56   0.01</span>
<span class="co">## cyl6:fwd4wd                     0.59   0.96     0.62   0.54</span>
<span class="co">## cyl8:fwd4wd                     2.13   0.99     2.15   0.03</span>
<span class="co">## cyl6:automanual                -0.76   0.90    -0.84   0.40</span>
<span class="co">## cyl8:automanual                 0.71   1.18     0.60   0.55</span>
<span class="co">## fwd4wd:automanual              -1.66   1.07    -1.56   0.12</span>
<span class="co">## cyl6:fwd4wd:automanual          1.29   1.52     0.85   0.40</span>
<span class="co">## cyl8:fwd4wd:automanual         -1.39   1.76    -0.79   0.43</span>
<span class="co">## -----------------------------------------------------------</span></code></pre>
<p>Let’s see what happens using all the default arguments:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/cat_plot.html">cat_plot</a></span><span class="op">(</span><span class="va">fit3</span>, pred <span class="op">=</span> <span class="va">cyl</span>, modx <span class="op">=</span> <span class="va">fwd</span><span class="op">)</span></code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
<p>This is with <code>geom = "point"</code>. We can see a main effect of <code>cyl</code> and maybe something is going on with the interaction as well, since the different between <code>2wd</code> and <code>4wd</code> seems to decrease as <code>cyl</code> gets higher.</p>
<p>You can also plot the observed data on the plot:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/cat_plot.html">cat_plot</a></span><span class="op">(</span><span class="va">fit3</span>, pred <span class="op">=</span> <span class="va">cyl</span>, modx <span class="op">=</span> <span class="va">fwd</span>, plot.points <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-5-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="line-plots">Line plots<a class="anchor" aria-label="anchor" href="#line-plots"></a>
</h2>
<p>And since <code>cyl</code> does have a clear order, it might make more sense to connect those dots. Let’s try <code>geom = "line"</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/cat_plot.html">cat_plot</a></span><span class="op">(</span><span class="va">fit3</span>, pred <span class="op">=</span> <span class="va">cyl</span>, modx <span class="op">=</span> <span class="va">fwd</span>, geom <span class="op">=</span> <span class="st">"line"</span><span class="op">)</span></code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-6-1.png" width="576"></p>
<p>Okay, that makes the trend quite a bit clearer.</p>
<p>You have some other options, too. Suppose you will need this plot to look good in black and white. Let’s change the shape of those points for different values of the moderator.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/cat_plot.html">cat_plot</a></span><span class="op">(</span><span class="va">fit3</span>, pred <span class="op">=</span> <span class="va">cyl</span>, modx <span class="op">=</span> <span class="va">fwd</span>, geom <span class="op">=</span> <span class="st">"line"</span>, point.shape <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-7-1.png" width="576"></p>
<p>You can change the line patterns as well for more clarity.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/cat_plot.html">cat_plot</a></span><span class="op">(</span><span class="va">fit3</span>, pred <span class="op">=</span> <span class="va">cyl</span>, modx <span class="op">=</span> <span class="va">fwd</span>, geom <span class="op">=</span> <span class="st">"line"</span>, point.shape <span class="op">=</span> <span class="cn">TRUE</span>,
         vary.lty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-8-1.png" width="576"></p>
<p>You may also choose any color palette from <code>RColorBrewer</code> as well as several preset palettes available in <code>jtools</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/cat_plot.html">cat_plot</a></span><span class="op">(</span><span class="va">fit3</span>, pred <span class="op">=</span> <span class="va">cyl</span>, modx <span class="op">=</span> <span class="va">fwd</span>, geom <span class="op">=</span> <span class="st">"line"</span>, point.shape <span class="op">=</span> <span class="cn">TRUE</span>,
         colors <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span></code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
<p>Use <code><a href="https://jtools.jacob-long.com/reference/jtools_colors.html" class="external-link">?jtools_colors</a></code> for more on your color options.</p>
</div>
<div class="section level2">
<h2 id="bardynamite-plots">Bar/dynamite plots<a class="anchor" aria-label="anchor" href="#bardynamite-plots"></a>
</h2>
<p>Last but not least, you can also make bar charts, AKA dynamite plots. For many situations, these are not the best way to show your data, but I know it’s what a lot of people are looking for.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/cat_plot.html">cat_plot</a></span><span class="op">(</span><span class="va">fit3</span>, pred <span class="op">=</span> <span class="va">cyl</span>, modx <span class="op">=</span> <span class="va">fwd</span>, geom <span class="op">=</span> <span class="st">"bar"</span><span class="op">)</span></code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-10-1.png" width="576"></p>
<p>The transparency of the fill color depends on the presence of the error bars and observed data points.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/cat_plot.html">cat_plot</a></span><span class="op">(</span><span class="va">fit3</span>, pred <span class="op">=</span> <span class="va">cyl</span>, modx <span class="op">=</span> <span class="va">fwd</span>, geom <span class="op">=</span> <span class="st">"bar"</span>, interval <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-11-1.png" width="576"></p>
<p>Now let’s look with observed data:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/cat_plot.html">cat_plot</a></span><span class="op">(</span><span class="va">fit3</span>, pred <span class="op">=</span> <span class="va">cyl</span>, modx <span class="op">=</span> <span class="va">fwd</span>, geom <span class="op">=</span> <span class="st">"bar"</span>, interval <span class="op">=</span> <span class="cn">FALSE</span>,
         plot.points <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="categorical_files/figure-html/unnamed-chunk-12-1.png" width="576"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jacob A. Long.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
